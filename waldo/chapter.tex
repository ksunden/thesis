\chapter{WALDO: A case study on building a full instrument with \texttt{yaq}} \label{cha:waldo}

\clearpage

\section{Introduction}  % =========================================================================

\clearpage

\section{Design Requirements}  % =============================================================

\subsection{Specifications}

- rep rate
- pulse width
- number of tunable sources
- wavelength regions
- range for delay
- speed of detection, simultaneous acquisition


\subsection{Hardware Selection}

- many from same manufacturers as other systems
   - means yaq daemons are either done, or at least similar enough as to only require minimal perturbations
   - Extant Python interface a plus


\clearpage

\section{Implementing Daemons}  % ===================================================================

Much of the hardware comes before the core upstream laser is on the table
As hardware arrives, daemons can be created _before_ it goes on the table.
   - Some can be surmised from documentation, though it all must be tested thoroughly
   - yaq makes testing the interface easy, as there are limited, well documented, ways to interface with the hardware.
   - Mono had additional features: motorized mirrors and slits
   - Delays were a different model that had some initial bugs
   - Lightcon uses discrete motor positions

   New daemons:
   - Integrated array detector inside of one of the opas
   - gage daemon
      - Less able to be worked out before the system is assembled, as signals are key to ensuring correctness
      - Some done with pulse generators and such, but ultimately hard to fully replicate a running system.
      - discuss chopping

\clearpage

\section{Assemble the Instrument}  % ===================================================================

"The BIG day", when the upstream lasers get installed
   - Done by a tech
   - Can then build around it
      - Chopping
      - Optics for ensuring columation and beam size
      - delays
      - Focusing into sample
      - sample cell itself
      - focusing into mono
      - enclosure
      - alternate beam paths for tuning, etc
Bluesky + yaq = <3
   - Getting to experiments
   - Started with old setup
   - a false start or two with bluesky
Building custom instrument is never "final"
  - New ideas of new experiments to do
  - Temporary setups for short term experiments
     - Yoon group experiments
  - Future addt'l control of existing hardware
     - rep rate
     - chopping
     - upstream laser standby

Include photos and table

\begin{table}[]
\begin{tabular}{llllll}
\hline
host      & port  & kind                    & name               \\ \hline
127.0.0.1 & 39011 & thorlabs-bsc203         & d1\_stage          \\
127.0.0.1 & 39012 & thorlabs-bsc203         & d2\_stage          \\
127.0.0.1 & 38601 & lightcon-topas4-shutter & twin1\_shutter     \\
127.0.0.1 & 38602 & lightcon-topas4-shutter & twin2\_shutter     \\
127.0.0.1 & 38603 & lightcon-topas4-shutter & hp\_shutter        \\
127.0.0.1 & 38701 & lightcon-topas4-motor   & hp\_Delay\_1       \\
127.0.0.1 & 38702 & lightcon-topas4-motor   & hp\_Crystal\_1     \\
127.0.0.1 & 38703 & lightcon-topas4-motor   & hp\_Delay\_2       \\
127.0.0.1 & 38704 & lightcon-topas4-motor   & hp\_Crystal\_2     \\
127.0.0.1 & 38705 & lightcon-topas4-motor   & hp\_SHG\_Crystal   \\
127.0.0.1 & 38706 & lightcon-topas4-motor   & hp\_RP5\_Stage     \\
127.0.0.1 & 38707 & lightcon-topas4-motor   & hp\_WS\_Wheel\_1   \\
127.0.0.1 & 38708 & lightcon-topas4-motor   & hp\_RP6\_Stage     \\
127.0.0.1 & 38709 & lightcon-topas4-motor   & hp\_Crystal\_Stage\_2 \\
127.0.0.1 & 38710 & lightcon-topas4-motor   & hp\_WS\_Wheel\_2   \\
127.0.0.1 & 38801 & lightcon-topas4-motor   & twin1\_Delay_1     \\
127.0.0.1 & 38802 & lightcon-topas4-motor   & twin1\_Crystal\_1  \\
127.0.0.1 & 38803 & lightcon-topas4-motor   & twin1\_Delay\_2    \\
127.0.0.1 & 38804 & lightcon-topas4-motor   & twin1\_Crystal\_2  \\
127.0.0.1 & 38805 & lightcon-topas4-motor   & twin1\_RP\_Stage   \\
127.0.0.1 & 38806 & lightcon-topas4-motor   & twin1\_DFG\_CS\_1  \\
127.0.0.1 & 38901 & lightcon-topas4-motor   & twin2\_Delay\_1    \\
127.0.0.1 & 38902 & lightcon-topas4-motor   & twin2\_Crystal\_1  \\
127.0.0.1 & 38903 & lightcon-topas4-motor   & twin2\_Delay\_2    \\
127.0.0.1 & 38904 & lightcon-topas4-motor   & twin2\_Crystal\_2  \\
127.0.0.1 & 38905 & lightcon-topas4-motor   & twin2\_SHG\_Crystal \\
127.0.0.1 & 38906 & lightcon-topas4-motor   & twin2\_RP\_Stage   \\
127.0.0.1 & 38907 & lightcon-topas4-motor   & twin2\_DFG\_CS\_1  \\
127.0.0.1 & 38001 & attune                  & hp                 \\
127.0.0.1 & 38002 & attune                  & twin1              \\
127.0.0.1 & 38003 & attune                  & twin2              \\
127.0.0.1 & 39876 & horiba-ihr320           & mono               \\
127.0.0.1 & 39977 & rgb-qmini               & orpheus\_hp\_qmini \\
127.0.0.1 & 39001 & attune-delay            & d1                 \\
127.0.0.1 & 39002 & attune-delay            & d2                 \\
127.0.0.1 & 39003 & gage-compuscope         & daq                \\
127.0.0.1 & 38911 & thorlabs-pm-triggered   & thorlabs\_pm100d   \\
127.0.0.1 & 38401 & thorlabs-ell18          & hp\_FH\_IDL        \\
127.0.0.1 & 38500 & wright-fuyu-linear      & act                \\
127.0.0.1 & 38501 & wright-fuyu-linear      & pm1                \\
127.0.0.1 & 38502 & wright-fuyu-linear      & pm2                \\
127.0.0.1 & 38503 & wright-fuyu-linear      & pmtest             \\
127.0.0.1 & 36000 & system-monitor          & massive            \\
127.0.0.1 & 39200 & gdrive                  & gdrive             \\
127.0.0.1 & 38510 & newport-conex-agp       & filter1\_angle     \\
127.0.0.1 & 38010 & attune                  & filter1            \\ \hline
\end{tabular}
\caption[Waldo Daemons]{Summary of installed daemons on Waldo}
\label{waldo:tab:summary}
\end{table}


\clearpage
